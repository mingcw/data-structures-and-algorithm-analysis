# 创建链表的游标实现法

通常，链表可以通过指针实现。然而，有些机器不支持指针。本例是创建链表的游标（cursor）实现法。

## 游标法必须模拟的 2 个条件

在链表的指针实现中有两个重要的特点：

> 1. 数据存储在一组结构体中。每一个结构体包含有数据和指向下一结构体的指针。
> 2. 一个新的结构体可以通过调用 malloc 而从全局内存（global memory）中得到，通过调用 free 被释放。

游标法必须能模仿以上两个特性。

1. 满足特性 1 的方法是预留一个全局的结构体数组（游标空间）代替全局内存。对于数组内的任何单元，通过数组下标可以唯一访问到（代替指针）。
2. 满足特性 2 的方法是让游标空间代行 malloc 和 free 的函数功能。并让单元 0 作为表头（不存数据）。 每个单元包含一个数据 Element 和下一单元的下标 Next。Next 为 0 时等价于 NULL 指针，表示 **空链表** 或游标 **空间用尽**。

## 游标空间的尺寸

链表由多个节点构成，每一个节点可以从游标空间获得，用下标代替指针来标识节点。由于游标空间和链表各有一个头结点，所以如果要生成有 N 个节点的链表，游标空间（伪全局内存）至少需要 (N + 2) 个存储单元。

## 初始化

在创建链表之前，需要准备一个伪全局空间（游标空间），用来分配节点内存。当需要 malloc 节点时，弹出游标空间表头的第一个单元；当需要 free 节点时，将该单元放回表的前端（表头后）。

游标空间（CursorSpace）的初始化是一个简单的循环结构。

Slot | Element | Next
---- | ------- | -----
0    |         | 1
1    |         | 2
2    |         | 3
3    |         | 4
4    |         | 5
5    |         | 6
6    |         | 7
7    |         | 8
8    |         | 9
9    |         | 10
10   |         | 11
11   |         | 0
